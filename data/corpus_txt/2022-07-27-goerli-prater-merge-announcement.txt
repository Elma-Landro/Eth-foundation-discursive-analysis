Titre: Goerli/Prater Merge Announcement\nAuteur: Protocol Support Team\nDate: July 27, 2022\nURL: https://blog.ethereum.org/2022/07/27/goerli-prater-merge-announcement\nCatÃ©gorie: Non catÃ©gorisÃ©\n\n==================================================\n\nor the last testnet proof-of-stake transition, oerli will merge with rater. he combined oerli/rater network will retain the oerli name post-merge.nnellatri, the rater upgrade readying it for he erge will happen at epochnnnn, epected atnn  on ugust , nn.nnfter ellatri is activated, the oerli/rater merge will happen when oerli hits a total difficulty ofnnnn, epected betweennnugust -, nn.nnost-merge, oerli's validator set will remain open for individual stakers to run testnets validators. takers who wish to start a oerli/rater validator can do so at thennrater aunchpadnn.nnackgroundnnfter years of work to bring proof-of-stake to thereum, we are now well into the final testing stage testnet deployments!nnfter several devnets, shadow forks and merges on deprecated testnets,nnepolia was recently transitioned to proof-of-stakenn. ow, only one more testnet remains oerli, and its associated eacon hain, rater.nnhe erge is different from previous thereum upgrades in two ways. irst, node operators need to update both their consensus layer () and eecution layer () clients in tandem, rather than just one of the two. econd, the upgrade activates in two phases the first, named ellatri, at an epoch height on the eacon hain and the second, named aris, upon hitting annotal ifficultynnvalue on the eecution layer.nnpgrade nformationnnimingnnhe ergennis a two-step process. t starts with a network upgrade, ellatri, on the consensus layer, triggered by an epoch height. his is followed by the eecution layer's transition from proof-of-work to proof-of-stake, aris, triggered by a specificnnotal ifficultynnthreshold, called thennerminal otal ifficultynn(nnnn).nnhennellatrinnupgrade is scheduled for epochnnnnon the rater eacon hain, epected atnn  on ugust , nn.nnarisnn, the eecution layer's portion of the transition, will trigerred by reaching annerminal otal ifficulty ()nnofnnnnon oerli, epected betweennnugust -, nn.nnnce the eecution layer has eceeded thennnn, the net block will be solely produced by a eacon hain validator. e consider he erge to have been completed once the eacon hain has finalized this block. ssuming normal network conditions, this should happen  epochs, or approimately  minutes, after the first post- block is hit!nn new - block tag,nnfinalizednn, returns the latest finalized block or an error if no such post-merge block eists. his tag can be used for applications to check if he erge has been completed. imilarly, smart contracts cannnquery thennnnopcode (nnnn)nn, renamed tonnnnpost-merge, to determine if he erge has happened. e recommend infrastructure providers monitor overall network stability in addition to finalization status.nnlient eleasesnnhe following client releases support he erge across the oerli & rater testnets. ode operators must runnnbothnnan eecution and consensus layer client to remain on the network during and after he erge.nnhen choosing which client to run, validators should be especially mindful of the risks of running a majority client on both the  and . n eplainer of these risks and their consequences can be foundnnherenn. n estimate of current  and  client distribution and guides for switching from one client to another can be foundnnherenn.nnonsensus ayernnamennersionnninknnighthousenneardude lockberg (v..)nnownloadnnodestarnnv..nnownloadnnimbusnnv..nnownloadnnrysmnnv..-rc.nnownloadnnekunn..nnownloadnnecution ayernnamennersionnninknnesunn..-nnownloadnnrigonnn..-alphannownloadnngo-ethereum (geth)nnv..nnownloadnnethermindnn..nnownloadnnpgrade pecificationsnnonsensus-critical changes for he erge are specified in two placesnnhe consensus layer changes, under thennbellatrinndirectorynnof the consensus-specs repositorynnhe eecution layer changes, under thennarisnnspecnnin the eecution-specs repositorynnn addition to these, two other specifications cover how the consensus and eecution layer clients interactnnhe ngine , specified in thenneecution-apis repositorynn, is used for communication between the consensus and eecution layersnnptimistic ync, specified in thennsyncnnfolder of the consensus-specs repository, is used by the consensus layer to import blocks as the eecution layer client is syncing and to provide a partial view of the head of the chain from the former to the latternnnns a node operator, what should  donnost-merge, an thereum full node will combine a consensus layer () client, which runs the proof-of-stake eacon hain, and an eecution layer () client, which manages the user-state and runs the computations associated with transactions. hese communicate over an authenticated port using a new set of   methods called thennngine nn. he  and  client authenticate each other using a  secret.nnode operators should refer to their clients' documentation for instructions about how to generate and configure these.nnn other words, if you were already running a node on the eacon hain, you now also need to run an eecution layer client. imilarly, if you were running a node on the current proof-of-work network, you will need to run a consensus layer client. or them to communicate securely, a  token must be passed to each client.nnummary instructions for running a node on the oerli/rater network can be foundnnherenn.nnt is worth emphasizing that while they are both part of consensus layer client releases, running a eacon ode is distinct from running a alidator lient. takers must run both, but node operators only need the former.nnhis postnneplains the difference between both components in more detail.nnlso, note that each layer will maintain an independent set of peers and epose its own s. henneaconnnandnn nns will both continue working as epected.nns a staker, what do  need to donnhe oerli/rater erge is your last opportunity to ensure that your validators are correctly configured before the mainnet transition. unning through the transition now is strongly recommended to avoid any unepected issues on mainnet.nns eplained above,nnvalidators on the eacon hain will need to run an eecution layer client after he erge, in addition to their consensus layer clients.nnre-merge, this was strongly recommended, but validators could have outsourced these functions to third-party providers. his was possible because the only data required on the eecution layer were updates to the deposit contract.nnost-merge, validators need to ensure that transactions in blocks that they create and attest to are valid. o do this, each beacon node must be paired with an eecution layer client. ote that multiple validators can still be paired to a single beacon node & eecution layer client combo. hile this epands validators' responsibilities, it also gives a validator who proposes a block the right to its associated transaction priority fees (which currently go to miners).nnhile validator rewards accrue on the eacon hain and will require a subsequent network upgrade to be withdrawn, transaction fees will continue to be paid, burned, and distributed on the eecution layer. alidators can specify any thereum address as a recipient for transaction fees.nnfter updating your consensus client, be sure to set thennfee recipientnnas part of your validator client configurations to ensure transaction fees are sent to an address you control.nnf you have staked using a third-party provider, it is up to your selected provider to specify how these fees are allocated.nnhe rater taking aunchpad has annerge eadiness hecklistnnthat stakers can use to ensure they have gone through each step of the process. he thtaker team is also hosting annerge alidator reparation orkshopnnon uly .nnhy is the estimate for thennerminal otal ifficultynndate so broadnnhe volatility in incremental difficulty per block makes estimating a window for thennnnharder than with a block or epoch height, hence the wider epected range. sers should note that this will also be the case for mainnet's transition due to changes in proof-of-work hash rate.nns an application or tooling developer, what should  donnith he erge going live on oerli, now is your last chance to ensure that your product works as epected through the proof-of-stake transition and in a post-merge contet. s eplained in annprevious postnn, he erge will have only minimal impact on a subset of contracts deployed on thereum, none of which should be breaking. dditionally, the lion's share of user  endpoints remain stable (unless you use proof-of-work specific methods such asnneth_getorknn).nnhat said, most applications on thereum involve much more than on-chain contracts.nnow is the timennto ensure that your front-end code, tooling, deployment pipeline and other off-chain components work as intended. e strongly recommend that developers run through a complete testing & deployment cycle on epolia, opsten or iln and report any issues with tools or dependencies to those projects' maintainers. f you are unsure where to open an issue, please usennthis repositorynn.nndditionally, you should note that all testnets aside from epolia and oerli will be deprecated post-merge. f you are a user of opsten, inkeby or iln, you should plan to migrate to oerli or epolia. ore information about this can be foundnnherenn.nns an thereum user or ther holder, is there anything  need to donno. he thereum mainnet is not affected by this testnet. ubsequent announcements will be made on this blog before mainnet's transition.nns a miner, is there anything  need to donno. f you are mining on the thereum mainnet, you should be aware that the network will operate entirely under proof-of-stake after he erge. t that point, mining will no longer be possible on the network.nns a validator, can  withdraw my stakenno. he erge is the most complicated upgrade to thereum to date. o minimize risks of network disruptions, a minimal approach was taken which ecluded any non-transition changes from this upgrade.nnithdrawals from the eacon hain will likely be introduced in the first upgrade after he erge. pecifications for both thennconsensusnnandnneecutionnnlayers are in progress.nn have more questions, where can  ask themnnhe thtaker community has set up a discord channel to answer staker and node operator questions. ou can join their discordnnherennand then use thenn#goerli-praternnchannel for assistance. s mentioned above, thtaker will also host annerge alidator reparation orkshopnnon uly .nndditionally, annerge ommunity allnnis scheduled for ugust ,  . lient developers and researchers will be available to answer questions from node operators, stakers, infrastructure & tooling providers and community members. ote that this community call is epected to happennnafternnthe oerli/rater merge.nnwen mergenns of the publication of this post, the time for the thereum mainnet proof-of-stake transition hasnnnotnnbeen set. ny source claiming otherwise is likely to be a scam. pdates will be posted on this blog. lease stay safe!nnssuming no issues are found during the oerli/rater merge, once clients have feature-complete releases, a slot height will be chosen for the ellatri upgrade on the mainnet eacon hain and anntotal difficulty valuennwill be set for the mainnet transition. lients will then make releases that enable he erge on mainnet. hese will be announced on this blog and in other community publications.nnowever, if issues are found at any point in the process or test coverage is judged to be insufficient, these things will be addressed before continuing with the deployment process.nnnly then will it be possible to estimate the eact date for he erge.nnn other words, ðŸ”œ.