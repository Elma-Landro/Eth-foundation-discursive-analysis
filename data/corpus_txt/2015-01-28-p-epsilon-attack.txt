Titre: The P + epsilon Attack\nAuteur: Vitalik Buterin\nDate: January 28, 2015\nURL: https://blog.ethereum.org/2015/01/28/p-epsilon-attack\nCatégorie: Non catégorisé\n\n==================================================\n\npecial thanks to ndrew iller for coming up with this attack, and to ack ess, lad amfir and aul ztorc for discussion and responsesnnne of the more interesting surprises in cryptoeconomics in recent weeks came from an attack onnnchellingoinnnconceived by ndrew iller earlier this month. lthough it has always been understood that chellingoin, and similar systems (including the more advancednnruthcoinnnconsensus), rely on what is so far a new and untested cryptoeconomic security assumption - that one can safely rely on people acting honestly in a simultaneous consensus game just because they believe that everyone else will - the problems that have been raised so far have to do with relatively marginal issues like an attacker's ability to eert small but increasing amounts of influence on the output over time by applying continued pressure. his attack, on the other hand, shows a much more fundamental problem.nnhe scenario is described as follows. uppose that there eists a simple chelling game where users vote on whether or not some particular fact is true () or false () say in our eample that it's actually false. ach user can either vote  or . f a user votes the same as the majority, they get a reward of  otherwise they get . hus, the payoff matri looks as followsnnou vote nnou vote nnthers vote nnnnnnthers vote nnnnnnhe theory is that if everyone epects everyone else to vote truthfully, then their incentive is to also vote truthfully in order to comply with the majority, and that's the reason why one can epect others to vote truthfully in the first place a self-reinforcing ash equilibrium.nnow, the attack. uppose that the attacker credibly commits (eg. via an thereum contract, by simply putting one's reputation at stake, or by leveraging the reputation of a trusted escrow provider) to pay out  to voters who voted  after the game is over, where    + ε if the majority votes , and    if the majority votes . ow, the payoff matri looks like thisnnou vote nnou vote nnthers vote nnnn + εnnthers vote nnnnnnhus, it's a dominant strategy for anyone to vote  no matter what you think the majority will do. ence, assuming the system is not dominated by altruists, the majority will vote , and so the attacker will not need to pay anything at all. he attack has successfully managed to take over the mechanism at zero cost. ote that this differs from icholas ouy's argument aboutnnzero-cost % attacks on proof of stakenn(an argument technically etensible to -based proof of work) in that here nonnepistemic takeovernnis required even if everyone remains dead set in a conviction that the attacker is going to fail, their incentive is still to vote to support the attacker, because the attacker takes on the failure risk themselves.nnalvaging chelling chemesnnhere are a few avenues that one can take to try to salvage the chelling mechanism. ne approach is that instead of round  of the chelling consensus itself deciding who gets rewarded based on the "majority is right" principle, we use round  +  to determine who should be rewarded during round , with the default equilibrium being that only people who voted correctly during round  (both on the actual fact in question and on who should be rewarded in round  - ) should be rewarded. heoretically, this requires an attacker wishing to perform a cost-free attack to corrupt not just one round, but also all future rounds, making the required capital deposit that the attacker must make unbounded.nnowever, this approach has two flaws. irst, the mechanism is fragile if the attacker manages to corrupt some round in the far future by actually paying up  + ε to everyone, regardless of who wins, then the epectation of that corrupted round causes an incentive to cooperate with the attacker to back-propagate to all previous rounds. ence, corrupting one round is costly, but corrupting thousands of rounds is not much more costly.nnecond, because ofnndiscountingnn, the required deposit to overcome the scheme does not need to be infinite it just needs to be very very large (ie. inversely proportional to the prevailing interest rate). ut if all we want is to make the minimum required bribe larger, then there eists a much simpler and better strategy for doing so,nnpioneered by aul torcznn require participants to put down a large deposit, and build in a mechanism by which the more contention there is, the more funds are at stake. t the limit, where slightly over % of votes are in favor of one outcome and % in favor of the other, the entire deposit it taken away from minority voters. his ensures that the attack still works, but the bribe must now be greater than the deposit (roughly equal to the payout divided by the discounting rate, giving us equal performance to the infinite-round game) rather than just the payout for each round. ence, in order to overcome such a mechanism, one would need to be able to prove that one is capable of pulling off a % attack, and perhaps we may simply be comfortable with assuming that attackers of that size do not eist.nnnother approach is to rely on counter-coordination essentially, somehow coordinate, perhaps via credible commitments, on voting  (if  is the truth) with probability . and  with probability ., the theory being that this will allow users to (probabilistically) claim the mechanism's reward and a portion of the attacker's bribe at the same time. his (seems to) work particularly well in games where instead of paying out a constant reward to each majority-compliant voter, the game is structured to have a constant total payoff, adjusting individual payoffs to accomplish this goal is needed. n such situations, from a collective-rationality standpoint it is indeed the case that the group earns a highest profit by having % of its members vote  to claim the attacker's reward and % vote  to make sure the attacker's reward is paid out.nnowever, this approach itself suffers from the flaw that, if the attacker's bribe is high enough, even from there one can defect. he fundamental problem is that given a probabilistic mied strategy between  and , for each the return always changes (almost) linearly with the probability parameter. ence, if, for the individual, it makes more sense to vote for  than for , it will also make more sense to vote with probability . for  than with probability . for , and voting with probability  for  will work even better.nnence, everyone will defect from the "% for " strategy by simply always voting for , and so  will win and the attacker will have succeeded in the costless takeover. he fact that such complicated schemes eist, and come so close to "seeming to work" suggests that perhaps in the near future some comple counter-coordination scheme will emerge that actually does work however, we must be prepared for the eventuality that no such scheme will be developed.nnurther onsequencesnniven the sheer number of cryptoeconomic mechanisms that chellingoin makes possible, and the importance of such schemes in nearly all purely "trust-free" attempts to forge any kind of link between the cryptographic world and the real world, this attack poses a potential serious threat - although, as we will later see, chelling schemes as a category are ultimately partially salvageable. owever, what is more interesting is the much larger class of mechanisms that don't look quite like chellingoin at first glance, but in fact have very similar sets of strengths and weaknesses.nnarticularly, let us point to one very specific eample proof of work. roof of work is in fact a multi-equilibrium game in much the same way that chelling schemes are if there eist two forks,  and , then if you mine on the fork that ends up winning you get   and if you mine on the fork that ends up losing you get nothing.nnou mine on nnou mine on nnthers mine on nnnnnnthers mine on nnnnnnow, suppose that an attacker launches a double-spend attack against many parties simultaneously (this requirement ensures that there is no single party with very strong incentive to oppose the attacker, opposition instead becoming a public good alternatively the double spend could be purely an attempt to crash the price with the attacker shorting at  leverage), and call the "main" chain  and the attacker's new double-spend fork . y default, everyone epects  to win. owever, the attacker credibly commits to paying out .  to everyone who mines on  if  ends up losing. ence, the payoff matri becomesnnou mine on nnou mine on nnthers mine on nnnn.nnthers mine on nnnnnnhus, mining on  is a dominant strategy regardless of one's epistemic beliefs, and so everyone mines on , and so the attacker wins and pays out nothing at all. articularly, note that in proof of work we do not have deposits, so the level of bribe required is proportional only to the mining reward multiplied by the fork length, not the capital cost of % of all mining equipment. ence, from a cryptoeconomic security standpoint, one can in some sense say that proof of work has virtually no cryptoeconomic security margin at all (if you are tired of opponents of proof of stake pointing you tonnthis article by ndrew oelstrann, feel free to link them here in response). f one is genuinely uncomfortable with thennweak subjectivitynncondition of pure proof of stake, then it follows that the correct solution may perhaps be to augment proof of work with hybrid proof of stake by adding security deposits and double-voting-penalties to mining.nnf course, in practice, proof of work has survived despite this flaw, and indeed it may continue to survive for a long time still it may just be the case that there's a high enough degree of altruism that attackers are not actually % convinced that they will succeed - but then, if we are allowed to rely on altruism, naive proof of stake works fine too. ence, chelling schemes too may well simply end up working in practice, even if they are not perfectly sound in theory.nnhe net part of this post will discuss the concept of "subjective" mechanisms in more detail, and how they can be used to theoretically get around some of these problems.